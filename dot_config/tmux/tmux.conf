set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'jaclu/tmux-menus'
set -g @plugin '27medkamal/tmux-session-wizard'
set -g @plugin 'jaclu/tmux-power-zoom'
set -g @plugin 'imomaliev/tmux-peacock'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# GENERAL SETTINGS
set -g default-terminal "screen-256color"                                                                 # 256 color
set -sa terminal-features ",*256col*:RGB"                                                                 # True color support
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'                                                        # Undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m' # Underscore colors
set -sg escape-time 0                                                                                     # Time for tmux to wait for key sequence
set -g history-limit 50000                                                                                # Maximum number of lines held in window history
set -s buffer-limit 20                                                                                    # Number of buffers, older than limit buffer will be removed
set -g display-time 2500                                                                                  # Time for which status line messages and indicators are displayed in miliseconds, 0 means diplay until a key is pressed
setw -g remain-on-exit off                                                                                # Destroy window when program exits
set -g repeat-time 500                                                                                    # Typing command without pressing prefix key again in the specified time in miliseconds
setw -g automatic-rename on                                                                               # Automatic window renaming
setw -g automatic-rename-format '#{pane_current_command}'                                                 # Format of automatic window renaming
setw -g allow-rename off                                                                                  # Allow programs to change the window name
setw -g xterm-keys on                                                                                     # Xterm style function key sequences
set -g mouse on                                                                                           # Enable mouse support
set -g status-keys vi                                                                                     # Use vi style keybindings in command prompt
setw -g mode-keys vi                                                                                      # Use vi style keybindings in copy mode
set -g base-index 1                                                                                       # Starting index for new window
set -g pane-base-index 1                                                                                  # Starting index for new pane
setw -g aggressive-resize on                                                                              # Fix from a smaller client issue

# a little less awkward than C-b. Considering using some Planck keymap instead.
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# I can never remember the other ones, they're so random
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# switch panes using Alt-arrow without prefix
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Power Zoom action `prefix + Z` to toggle zoom
# Double click right mouse button
set -g @power_zoom_mouse_action 'DoubleClick3Pane'

# Setup menus trigger (context menus to help learn tmux)
# Make sure backtic isn't bound anymore
set -g @menus_trigger 'C-\'
set -g @menus_location_x 'C'
set -g @menus_location_y 'C'

# Restore neovim session after reboot
set -g @resurrect-strategy-nvim 'session'

# clock
set-window-option -g clock-mode-colour colour64 #green

# bell
set-window-option -g window-status-bell-style fg=colour235,bg=colour160 #base02, red

set -g status-right '#{battery_status_bg} Batt: #{battery_icon} #{battery_percentage} #{battery_remain} | %a %h-%d %H:%M '

run '~/.tmux/plugins/tpm/tpm'
